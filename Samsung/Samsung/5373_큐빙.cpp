#include <iostream>

using namespace std;

int cube[100];	
int N, M;
char order[1010][10];
int temp[50];
// moveIdx[i][j]: i에서 방향과 +,-를 결정. j는 원래 dix, j+1이 옮길 idx
int moveIdx[12][42] = {
	// 0 윗, 시계방향
	{	
		10,11,12,13,14,15,16,17,18,
		7,8,9,46,49,52,21,20,19,45,42,39,
		
		16,13,10,17,14,11,18,15,12,
		45,42,39,7,8,9,46,49,52,21,20,19
	},
	// 1 윗, 반시계방향
	{	
		10,11,12,13,14,15,16,17,18,
		7,8,9,46,49,52,21,20,19,45,42,39,

		12,15,18,11,14,17,10,13,16,
		46,49,52,21,20,19,45,42,39,7,8,9
	},
	// 2 아래, 시계방향
	{
		28,29,30,31,32,33,34,35,36,
		25,26,27,54,51,48,3,2,1,37,40,43,

		34,31,28,35,32,29,36,33,30,
		37,40,43,25,26,27,54,51,48,3,2,1
	},
	// 3 아래, 반시계방향
	{
		28,29,30,31,32,33,34,35,36,
		25,26,27,54,51,48,3,2,1,37,40,43,

		30,33,36,29,32,35,28,31,34,
		54,51,48,3,2,1,37,40,43,25,26,27
	},

	// 4 앞, 시계방향
	{
		19,20,21,22,23,24,25,26,27,
		16,17,18,52,53,54,30,29,28,43,44,45,

		25,22,19,26,23,20,27,24,21,
		43,44,45,16,17,18,52,53,54,30,29,28
	},
	// 5 앞, 반시계방향
	{
		19,20,21,22,23,24,25,26,27,
		16,17,18,52,53,54,30,29,28,43,44,45,

		21,24,27,20,23,26,19,22,25,
		52,53,54,30,29,28,43,44,45,16,17,18
	},

	// 6 뒤, 시계방향
	{
		1,2,3,4,5,6,7,8,9,
		34,35,36,48,47,46,12,11,10,39,38,37,

		7,4,1,8,5,2,9,6,3,
		39,38,37,34,35,36,48,47,46,12,11,10
	},
	// 7 뒤, 반시계방향
	{
		1,2,3,4,5,6,7,8,9,
		34,35,36,48,47,46,12,11,10,39,38,37,

		3,6,9,2,5,8,1,4,7,
		48,47,46,12,11,10,39,38,37,34,35,36
	},

	// 8 왼, 시계방향
	{
		37,38,39,40,41,42,43,44,45,
		1,4,7,10,13,16,19,22,25,28,31,34,

		43,40,37,44,41,38,45,42,39,
		28,31,34,1,4,7,10,13,16,19,22,25
	},
	// 9 왼, 반시계방향
	{
		37,38,39,40,41,42,43,44,45,
		1,4,7,10,13,16,19,22,25,28,31,34,

		39,42,45,38,41,44,37,40,43,
		10,13,16,19,22,25,28,31,34,1,4,7
	},

	// 10 오, 시계방향
	{
		46,47,48,49,50,51,52,53,54,
		9,6,3,36,33,30,27,24,21,18,15,12,

		52,49,46,53,50,47,54,51,48,
		18,15,12,9,6,3,36,33,30,27,24,21
	},
	// 11 오, 반시계방향
	{
		46,47,48,49,50,51,52,53,54,
		9,6,3,36,33,30,27,24,21,18,15,12,

		48,51,54,47,50,53,46,49,52,
		36,33,30,27,24,21,18,15,12,9,6,3
	}
};

// 윗 면은 흰색, 아랫 면은 노란색, 앞 면은 빨간색, 뒷 면은 오렌지색, 왼쪽 면은 초록색, 오른쪽 면은 파란색
void init() {
	for (int i = 1; i < 10; i++) cube[i] = 3;
	for (int i = 10; i < 19; i++) cube[i] = 0;
	for (int i = 19; i < 28; i++) cube[i] = 2;
	for (int i = 28; i < 37; i++) cube[i] = 1;
	for (int i = 37; i < 46; i++) cube[i] = 4;
	for (int i = 46; i < 55; i++) cube[i] = 5;
}

// 0윗흰, 1아래 노, 2앞빨, 3뒷오, 4왼초, 5오파
void printFront() {
	int idx = 0;
	for (int i = 10; i < 19; i++) {
		if (cube[i] == 0) cout << 'w';
		else if (cube[i] == 1) cout << 'y';
		else if (cube[i] == 2) cout << 'r';
		else if (cube[i] == 3) cout << 'o';
		else if (cube[i] == 4) cout << 'g';
		else if (cube[i] == 5) cout << 'b';

		if (idx++ % 3 == 2) cout << endl;
	}
}

int main() {
	cin >> N;

	for (int i = 0; i < N; i++) {
		cin >> M;
		for (int i = 0; i < M; i++) cin >> order[i];
		
		init();

		for (int i = 0; i < M; i++) {
			int idx = -2;
			// U: 윗 면, D: 아랫 면, F: 앞 면, B: 뒷 면, L: 왼쪽 면, R: 오른쪽 면
			if (order[i][0] == 'U') idx = 0;
			else if (order[i][0] == 'D') idx = 2;
			else if (order[i][0] == 'F') idx = 4;
			else if (order[i][0] == 'B') idx = 6;
			else if (order[i][0] == 'L') idx = 8;
			else if (order[i][0] == 'R') idx = 10;

			if (order[i][1] == '-') idx++;

			// 옮길 색깔을 임시저장
			for (int j = 0; j < 21; j++) temp[j] = cube[moveIdx[idx][j + 21]];
			// 색깔 옮기기
			for (int j = 0; j < 21; j++) cube[moveIdx[idx][j]] = temp[j];
		}
		printFront();
	}
	return 0;
}